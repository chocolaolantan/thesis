\chapter{提案する文書要約システム}
ここでは文書の意味的構造を考慮した
文書要約システムの設計について論じる．
語彙的結束性に基づくテキストタイリングによる文書分割と，
各話題をつなぐキーワードを考慮した重み付けによる重要文抽出する手法を用いる．
前章で述べている各関連研究のアルゴリズムの
文書に対する応用を提案する．


\section{システム概要}
本研究で提案するシステムを，図\ref{fig:clip014.eps}に示す．
文書分割・話題連結キーワードの抽出・PageRankアルゴリズムによる重要文抽出から成るシステムを提案する．

% 図の挿入
\begin{figure}[h]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=80mm]{clip026.eps}
  \end{center}
  \caption{本要約システムの概要図}%{}内にタイトルを記入してください
  \label{fig:clip014.eps}
\end{figure}

本システムの設計概要は図\ref{fig:clip014.eps}
であるように，文書を話題ごとに分割し，各話題から中心語彙群を抽出する．
それを基に，話題間をつなぐ語である話題連結キーワードを抽出する．
話題内での文間依存構造と，話題連結を考慮した重要文抽出を行う．

本システムを構築するための作業を以下に列挙する．

\begin{description}
  \item 共起語を考慮したテキストタイリング手法により，文書を分割．
  \item 話題の中心語彙群を抽出．
  \item 話題の中心語彙群間をつなぐ話題連結キーワードを抽出
  \item 話題連結キーワードによる文の重要度と，話題内での文間関係による文の重要度によって文を抽出．
\end{description}

以下にシステムの詳しい手法を述べていく．



\section{文書分割}
% 目的とからめて文書分割の有用性
本研究では，文書からの要約に重要文として抽出した文を用いる．
この際に，文書全体の一部分から抽出してしまうことによって，
重要な語句は多く含むが，冗長性のある要約文が生成されてしまう恐れがある．
また，ある程度全体から満遍なく抽出することによって，対象文書と
全体像を明確にした要約文の生成を期待することができる．
ユーザからのクエリがある場合などは，その限りではないが，
要約文はその文書の全体像を把握できる文書であるほうが望ましい．
先行研究において，重要文抽出による要約作成の研究では，
入力となるテキストをある基準によって分割しておくことによる
要約文の質的向上を図ることも提案されている\cite{yotsutani}．

そこで，入力テキストの話題毎への分割として，
前章で説明したテキストタイリング手法を文内での共起語を考慮するように改良し用いる．

% 改良テキストタイリング
前節で概要を説明したテキストタイリングの問題点をふまえ，
比較的短い文書に対しても適用可能なようにText\ Tiling法を改良した手法が提案されている\cite{hirao}．

テキストタイリングは，文書の意味的に関連の深い部分には，
同一の語が繰り替えし出現するという性質を仮定し利用している手法である．
しかし，前節で説明したように，短い文書の場合には，
文書内の小さな範囲の中で特定の語が繰り返し使用されることは稀であるが，
言い換えた語やその関連語が使用されることは多い．
そこで，語彙的連鎖の認定のために同一の語のみを対象とするのではなく，
シソーラスを用いる手法が提案されている\cite{mochiduki}\cite{honda}．

しかし，既存のシソーラスは語彙不足のため語の関係が十分に反映されているとは言えない．
また「不況$\to $倒産」のような連想関係も登録されていない．
語彙的連鎖を認定するためには，類似関係にある語だけでなく，
このような連想関係にある関連語もあわせて考慮する必要がある．

そこで，文書内の共起情報を利用する．
ここで述べる語の共起とは，
ある文書内で着目する語に対して他の語がその近傍で出現するこである．
そして，ある語にたいしてその近傍で頻繁に出現する語を共起語と呼ぶことにする．
共起語と着目した語の間には，何らかの関連がある部分が多く，
この考え方は情報検索における検索語拡張にも適用されている\cite{xuj}．

共起語は以下のように定義できる．
ある文書中において，
着目する単語tが出現する文の番号を，$l_{1},l_{2},\cdots,l_{i},\cdots ,l_{n},$とするとき，
全ての$l_{i}$に対して，前後の文番号$l_{i}-1,l_{i}+1$を考え，それら全ての集合をＬと表す．

\begin{eqnarray}
L=\left\{l_{1}-1,l_{1},l_{1}+1,\cdots ,l_{i}-1,l_{i},l_{i}+1,\cdots ,l_{n}-1,l_{n},l_{n}+1\right\}
\end{eqnarray}

Lに出現する単語t'のうちにLにおける総出現頻度$f_{L}(t')$が
しきい値Nを超える単語を，$u_{1},u_{2},\cdots ,u_{j},\cdots ,u_{k}$と表し，
それらを単語tの共起語と呼ぶ．
この手法を用いて文書に出現する全ての単語tに対して共起語を決定する．
次に，タイリングの際の窓に単語tが１回出現するごとに
共起語である$u_{1},u_{2},\cdots ,u_{j},\cdots ,u_{k}$も$\alpha $回出現したと考えて
左右の窓における$u_{1},u_{2},\cdots ,u_{j},\cdots ,u_{k}$の出現回数に$\alpha $を加算する．
ここで，$\alpha $は共起語の重み係数$(0\le \alpha \le 1)$である．

\begin{eqnarray}
sim(wl,wr)=\frac{\sum _{t}f(t_{wl})f(t_{wr})}{\sqrt{\sum _{t}f(t_{wl})^{2}\sum _{t}f(t_{wr})^{2}}}
\end{eqnarray}

例えば，図\ref{fig:clip005.eps}で単語Ｃに着目すると，
$N=3$とした場合には，A,B,Fが共起語となり，Ｃが１回出現すると，
A,B,Fも同時に$\alpha $回出現したと考え，左右の窓におけるA,B,Fの出現数に$\alpha $を加算し，
$f(t_{wl})$と$f(t_{wr})$をそれぞれ修正する．
仮に，左窓にCが１回，右窓にCが２回出現した場合には，
$f(A_{wl})+\alpha$を左窓におけるＡの出現数，$f(A_{wr})+2\alpha$を右窓にけるＡの出現回数と考え，
類似度\footnote{他の共起語についても同様にＣの出現回数に応じて$\alpha$を加算する．}を計算する．

% 図の挿入
\begin{figure}[tb]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=45mm]{clip005.eps}
  \end{center}
  \caption{文書内での単語共起の例}%{}内にタイトルを記入してください
  \label{fig:clip005.eps}
\end{figure}


図\ref{fig:clip006.eps}に示す同一語のみの繰り返しによる計算では，
類似度が０である基準点が連続しているため極小点を認定できない場合にも，
共起を考慮することによってそれを認定できるようになる．
このように語の共起語を考慮することによって，短い文書にも適用できるようになる．
ただし，共起語を考慮することによって，類似度が全体的に大きくなるため，
極小点において，グラフの窪みが大きい点を優先して話題境界とする手法などによって
話題転換点の選定方法を改良することが提案されている．

% 図の挿入

\begin{figure}[t]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=45mm]{clip006.eps}
  \end{center}
  \caption{共起を考慮したことによる類似度の変化}%{}内にタイトルを記入してください
  \label{fig:clip006.eps}
\end{figure}


% 注意点
本研究においては，文章を意味的なまとまりをもち，かつ，
ある程度の大きさに分割することを目的としてテキストタイリングを用いる．
そのため，文の途中でのセグメントは好ましくないため，タイリングを行う基準点は文末毎とした．
また，一文書に対するセグメント数は設定せず，極小点で，かつ，
しきい値より類似度が小さい点をセグメントと認定する．


\section{話題連結に対する重要度}

本研究では，話題毎の分割統治によって，話題という意味的なまとまりからの各々に重要文を抽出することによりバランスのとれた要約文が作成できるとしている．
しかし，それだけで一つの文書に対する要約文が作成できるわけではない．
そこで，本研究では文書の全体像の把握に向けた重要文抽出のためには，
文書の概要をつかむための視点を考慮する必要があると考える．
文書は文の集合であり，その文間の関係は単語によって表すことができるが，
それを１段階大きな視点から見ることで，
文書はつながりをもつ複数の文からなる話題の集合と捉えることができる．
話題を捉えることができれば，文間の関係と同じように，話題間の構造を考えることができる．
それによって，今までの単語と文という関係に加え，話題と話題間の構造というもう一つの関係を示すことができるようになる．話題間の構造を考えた場合に話題をつなぐ役割を果たしている文や単語は，文書の全体像を把握するために重要な概念であると考える．

ここで注目するその単語は，文書の話題内においてはそれほど重要な役割に感じることは出来ないかもしれないが，文書全体としては，重要な役割を担っているということができるだろう．
ここで，その役割を担うキーワードを話題連結キーワードと呼ぶことにする．

話題毎の分割統治によって全体からバランスよく文を抽出することに加え，
話題間の連結構造を捉えた重要度を提案する．

\subsection{話題連結キーワードの抽出}

話題間の連結構造を捉えるために，話題連結キーワードの抽出を提案する．
概念同士をつなぐ情報を扱った研究として前節で紹介したKeyGraph\cite{keygraph}という手法がある．
これは主張の内容を表すキーワード抽出を目的とした手法である．
KeyGraphでは，重要な内容というのは筆者独特の主張である，そして，筆者はその主張を示すために内容を構成しているという２点を前提としている．
つまり，文書の基礎となる概念は，筆者の主張を導き出すために関連し合っていると考え，基礎概念同士によって支えられているものが主張点であるとしている．
文書全体の単語共起グラフをベースに，基礎概念間と共起する単語を重要視し，主張点を抽出している．

本研究で抽出したいつなぐ情報とは，話題の中心語彙群をつなぐ単語である．
この単語の抽出のためには，話題の中心語彙群の抽出と，複数の中心的語彙群との共起を考えることが必要となる．

話題毎の単語間共起グラフを基にした話題連結キーワードの抽出手法を提案する．
\begin{enumerate}
  \item 話題の中心語彙群として頻度和最大クリークを抽出
  \item 話題連結キーワード候補として，中心語彙群と共起する単語を列挙
  \item 複数の中心語彙群と共起する候補を話題連結キーワードとして抽出%ここに項目を書く
\end{enumerate}

% 図の挿入
\begin{figure}[htbp]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=70mm]{clip022.eps}
  \end{center}
  \caption{話題連結キーワード}%{}内にタイトルを記入してください
  \label{fig:clip022.eps}
\end{figure}

中心語彙群は，話題を代表する単語群であり，また，結びつきの強い単語群である必要がある．
そこで，話題内での頻度上位単語による頻度和最大クリークを抽出する．
最大クリークは，互いに共起する最大の語集合であるため，要請を満たしている．

この中心語彙群の抽出方法は，一つの話題は一貫した概念を表現し，
その概念をめぐって文中の語が関係し合うという仮説（語彙的連鎖）に基づいている．
まず，出現回数が上位の語，すなわち頻出語を候補のするのは、
話題内の基礎概念を表す語は，各話題の中で何度も用いられることが多いからである．

図\ref{fig:clip009.eps}に文中の単語の出現状況とそこからの抽出される最大クリークを示す．
なお，図\ref{fig:clip009.eps}では，共起回数が２以上でエッジを張っている．
抽出される最大クリークはABCDとなる．

\begin{figure}[htb]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=40mm]{clip009.eps}
  \end{center}
  \caption{単語の出現状況と中心語彙群（クリーク）}
  \label{fig:clip009.eps}
\end{figure}

以上の作業により、話題毎の中心語彙群を生成する．

次に，この中心語彙群に含まれる単語と共起する単語を候補として列挙する．
この時に，中心語彙群$g$中の単語との共起度を式(\ref{word_co})として与えておく．
\begin{eqnarray}
\label{word_co}
f(w,g)=\sum _{s\in SEG}|w|_{s}|g|_{s}
\end{eqnarray}
ここで，$|w|_{s}$，$|g|_{s}$はそれぞれ文sでの単語wの出現頻度と中心語彙群中の単語の出現頻度を表す．

最後に，各話題中で列挙された候補のうち，複数の話題間に存在する単語を話題連結キーワードとして抽出する．
抽出した話題連結キーワードには，式(\ref{keyscore})によってスコアを与える．
\begin{eqnarray}
\label{keyscore}
key(w)=\sum _{g_{i}\in D}f(w,g_{i})
\end{eqnarray}


\subsection{話題連結の役割による文の重要度}
スコアづけされた関節語を用いて，話題連結としての文の重要度を決定する．
話題構造に対して，その文がどの程度重要な役割を担っているかを示した重要度とするためには，
\begin{itemize}
  \item 関節キーワードを多く含む文ほど，関節としての重要度は高い
  \item 関節キーワードのスコアが大きな単語を含むほど，関節としての重要度は高い
\end{itemize}
という二つの要請を満たす必要がある．
そこで，話題連結キーワードの総和を考え，文の長さによる影響を削減するために包含単語数で正規化したものを文の話題連結としての重要度とする．
\begin{eqnarray}
話題連結としての重要度=\frac{話題連結キーワードの総和}{包含単語数}
\end{eqnarray}

これによって，話題間をむすびつける話題連結キーワード，
そしてそれを基にした文の重要度が定義されたことになる．








\section{分割統治による話題毎の重要文抽出システム}
PageRankアルゴリズムを文書要約に応用する場合，文と文の相互関係のみに
着目して文の重要度を決定する手法がある\cite{yotsutani}．
相互関係を持つか否かで状態が表現されるため，必要な隣接行列を文-文ベクトル空間で表現する．
文-文ベクトル空間は行，列をセンテンスとし，関係は文書中の語の共起のあるなしで表される．
各文の間で内容語の共起関係があれば，あらかじめ定義されている内容語の重みで表現する．

また，文-文ベクトル空間$B$から推移確率行列$A$を求める．
例としてFig.\ref{fig:clip020.eps}は以下のように表される．
このとき$S_n\left( n=1,2,3\right)$は要約対象となる文中の各センテンス，
内用語$W_n\left( n=1,2,3\right)$自体の重みを
それぞれ$w_n\left( n=1,2,3\right)$とする．

% 図の挿入
\begin{figure}[htbp]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=40mm]{clip020.eps}
  \end{center}
  \caption{出現単語による文間相互依存関係}%{}内にタイトルを記入してください
  \label{fig:clip020.eps}
\end{figure}

\begin{equation}
B=\left[
  \begin{array}{ccc}
     0             &  w_1+w_2   &  w_１  \\
     w_1+w_2  &  0              &  w_3  \\
     w_1         &  w_3           &  0  \\
  \end{array}
\right]
\end{equation}


文-文ベクトル空間$B$を全確率化した推移確率行列を$A$とする．

\begin{equation}
A=\left[
  \begin{array}{ccc}
     0  &  \frac{w_1+w_2}{w_1+w_2+w_1}  &  \frac{w_1}{w_1+w_2+w_1}  \\
     \frac{w_1+w_2}{w_1+w_2+w_3}  &  0  &\frac{w_3}{w_1+w_2+w_3}    \\
     \frac{w_1}{w_1+w_3}  &  \frac{w_3}{w_1+w_3}  &  0  \\
  \end{array}
\right]
\end{equation}

このPageRankモデルを２つの重要度を組み合わせて用いるために拡張する．
ここでの２つの重要度とは，話題連結としての重要度と話題内での重要度である．
\begin{eqnarray}
\vec{q}=(1-\alpha )M\times \vec{q}+\alpha \vec{p}
\end{eqnarray}

右辺第一項の$M$は，話題内における推移確率行列であり，話題内での語の共起による文間の依存関係から重要度を決定する．
これに対して，第二項の$\vec{p}$はバイアスベクトルであり，これには文の話題連結としての重要度を全確率化したものを与える．
$\alpha $によって２つの重要度のバランスを制御し，文の重要度を決定する．
この手法を話題毎に同じ要約率で適用し，重要度に基づいて文を抽出する．
その後，話題毎の抽出文を和集合を全体での重要文抽出としての出力とする．


\section{文-文ベクトルの作成}
\label{similar}
前節で説明したモデルにおいては，語彙を介した文間の連結関係から，推移確率行列を定義する．
そこで，推移確率行列を求めるための文間の構造を文-文ベクトル空間で表す．
文-文ベクトル空間の各文の連結強度求めるための手法は数多く存在する．
そこで，各センテンスに含まれる単語を要素として，文-単語ベクトルを用いて以下の尺度により，文-文ベクトル空間の強度を求める．
また，文間の強度$sim$は比べる文と文の類似している度合いを用いる

\begin{equation}
\label{dice}
sim\left( x,y\right)=\frac{2\sum_{i=1}^{n}\left( x_i\cdot y_i\right)}{\sum_{i=1}^{n}x_i+\sum_{i=1}^{n}y_i}
\end{equation}

\begin{equation}
\label{cos}
sim\left( x,y\right)=\frac{\sum_{i=1}^{n}\left( x_i\cdot y_i\right)}{\sqrt{\sum_{i=1}^{n}\left( x_i\right) ^2\cdot \sum_{i=1}^{n}\left( y_i\right) ^2}}
\end{equation}


各式中の，$x,y$はそれぞれ文を表す．
文-単語ベクトル中の単語には1から$n$の番号がふられているとし，文$x$の単語番号$i$の重みは$x_i$と表現される．
式(\ref{dice})はDice係数と言い，重み付けられた単語の積集合を和集合で割り，2倍している．
式(\ref{cos})は余弦尺度といい，ベクトル空間における文間の角度の余弦を測る．
文は$n$次元の多次元ベクトルと考えられ，空間の各次元は1つの単語に対応する．
各ベクトルの位置は，ベクトル中の単語の重みで決定され2つのベクトルが同一である場合角度は0になり，余弦尺度は1になる．
式(\ref{cos})の分子は2つの文中の単語の重みの積を合計したものであるが，分母は正規化の項であり，
ベクトル長の積である．
上記のような各尺度が文-文間の強度として考えられる．


\section{文間の連結性の表現}
各話題間をつなぐ話題連結キーワードを考慮した場合の
文間の関係図を図\label{fig:clip011.eps}に示す．

\begin{figure}[htb]
  \begin{center}
    \includegraphics[keepaspectratio=true,height=80mm]{clip011.eps}
  \end{center}
  \caption{話題連結キーワードによる話題間リンクも考慮した文間の構造}
  \label{fig:clip011.eps}
\end{figure}

話題内での出現頻度を用いた重み付きの重要度の伝搬を用いて
文間の連結強度を求め，文-文ベクトル空間を定義し推移確率行列を求める．
加えて，話題間の連結構造による重要度をバイアスベクトルとしてを用いたPageRankアルゴリズム
によって文の重要度を再帰的に求める．